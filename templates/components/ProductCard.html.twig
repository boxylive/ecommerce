<div
    {{ attributes.defaults({ class: 'rounded-lg border border-gray-200' }) }}
    {% if added %} data-poll="delay(3000)|reset" {% endif %}
>
    <a href="{{ path('product_show', { slug: product.slug }) }}" class="flex flex-col">
        <div>
            <img class="rounded-t-lg mb-2" src="{{ product.image }}" alt="{{ product.name }}">
        </div>
        <div class="p-4 space-y-3 h-full flex flex-col justify-between">
            <h3 class="text-sm font-medium text-gray-900">{{ product.name }}</h3>
            <div class="desc text-sm text-gray-500">
                {{ product.description | u.truncate(50, '...', false) }}
            </div>
            <p class="font-medium text-gray-900">{{ product.price | price(20) | format_currency('EUR') }} TTC</p>
            <twig:Button
                data-action="live#action:prevent"
                data-live-action-param="debounce(300)|add"
                :disabled="added"
                class="{{ added ? 'bg-green-600 hover:bg-green-600' : '' }}"
            >
                {% if added %}
                    Le produit a bien été ajouté
                {% else %}
                    Ajouter au panier
                {% endif %}
            </twig:Button>
        </div>
    </a>
</div>
